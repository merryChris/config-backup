syntax on

set encoding=utf-8
set fileencoding=utf-8
set fileencodings=ucs-bom,utf-8,cp936

set nu
set ruler
set cindent
set autoindent
set ignorecase
set smartcase
set showcmd
set cursorline
set magic
set hlsearch
set incsearch

set tabstop=2
set softtabstop=2
set shiftwidth=2
set expandtab

set fo=trocq
set t_Co=256
set backspace=start
set mouse=v
set ttimeoutlen=100
set laststatus=2
set statusline=%<%f\ %m%r%h%w%{fugitive#statusline()}[TYPE=%Y]%=%-14.(%l,%c%V%)\ [%P]

" set the runtime path to include Vundle and initialize
set nocompatible
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
" alternatively, pass a path where Vundle should install plugins
"call vundle#begin('~/some/path/here')

" let Vundle manage Vundle, required
Plugin 'gmarik/Vundle.vim'

" Programming Usage
Plugin 'L9'
Plugin 'fcitx.vim'
Plugin 'FuzzyFinder'
"Plugin 'taglist.vim'
Plugin 'fatih/vim-go'
Plugin 'tpope/vim-fugitive'
Plugin 'airblade/vim-gitgutter'
Plugin 'scrooloose/nerdtree'
Plugin 'scrooloose/syntastic'

" Color Usage
Plugin 'matrix.vim--Yang'
Plugin 'flazz/vim-colorschemes'

" All of your Plugins must be added before the following line
call vundle#end()            " required
filetype plugin indent on    " required
" To ignore plugin indent changes, instead use:
"filetype plugin on
"
" Brief help
" :PluginList       - lists configured plugins
" :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate
" :PluginSearch foo - searches for foo; append `!` to refresh local cache
" :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal
"
" see :h vundle for more details or wiki for FAQ
" Put your non-Plugin stuff after this line

" Keyboard Mapper For Window Switching
nmap <C-j> <C-W>j<C-W>_
nmap <C-k> <C-W>k<C-W>_
nmap <C-l> <C-W>_

command! -nargs=1 -bang -complete=custom,<SID>PathComplete FindInPath
      \ :find<bang> <args>
function! s:PathComplete(ArgLead, CmdLine, CursorPos)
  return UserFileComplete(a:ArgLead, a:CmdLine, a:CursorPos, 1, &path)
endfunction

" use Alt+; add comment,like emacs
autocmd filetype cpp,java map <Esc>; $a<tab><tab>//
autocmd filetype cpp,java imap <Esc>; <End><tab><tab>//
autocmd filetype c map <Esc>; $a<tab><tab>/*  */<Esc>2hi
autocmd filetype c imap <Esc>; <End><tab><tab>/*  */<Left><Left><Left>
autocmd filetype sh map <Esc>; O#

" use Alt+' comment current line
autocmd filetype cpp,java map <Esc>' ^i//<Esc>
autocmd filetype cpp,java imap <Esc>' <C-O>^//
autocmd filetype c map <Esc>' ^i/* <C-O>$ */<Esc>
autocmd filetype c imap <Esc>' <C-O>^/* <C-O>$ */
autocmd filetype sh map <Esc>' ^i#<Esc>
autocmd filetype sh imap <Esc>' <C-O>^#

" use Ctrl+x+[l|n|p|cc] to list|next|previous|jump to count the result
map <C-x>l <ESC>:cl<ENTER>
map <C-x>n <ESC>:cn<ENTER>
map <C-x>p <ESC>:cp<ENTER>
map <C-x>c <ESC>:cc
map <C-y> <ESC>:w<ENTER>
inoremap <C-y> <ESC>:w<ENTER>
nmap cS :%s/\s\+$//g<CR>:noh<CR>
nmap cM :%s/\r$//g<CR>:noh<CR>

" For Python
autocmd filetype python source ~/.vim/python-macros.vim
autocmd filetype python set shiftwidth=4
autocmd filetype python set tabstop=4

" For Ruby
autocmd filetype ruby source ~/.vim/ruby-macros.vim

" For JavaScript
let g:tlist_javascript_settings = 'javascript;s:string;a:array;o:object;f:function;m:member'

" For HTML
au BufNewFile,BufRead *.jst,*.hbs,*.erb set filetype=html

" autocmd FileType ruby autocmd BufWritePre <buffer> :%s/\s\+$//e
set list listchars=tab:»·,trail:·

" Colorscheme Settings
colorscheme jelleybeans
highlight LineNr ctermbg=NONE
highlight Normal ctermbg=NONE
highlight NonText ctermbg=NONE
highlight SpecialKey ctermbg=NONE
highlight SignColumn ctermbg=NONE
highlight Folded ctermbg=DarkYellow
highlight Pmenu ctermbg=DarkYellow
highlight StatusLineNC ctermbg=DarkMagenta

" Plugins Mappers
" For NERDTree
autocmd vimenter * if !argc() | NERDTree | endif
nnoremap <C-n> :NERDTreeToggle<CR>
nnoremap <C-n> :NERDTreeFind<CR>
" For FuzzyFinder
nnoremap <silent> fb :FufBuffer<CR>
nnoremap <silent> ff :FufFile<CR>
"nnoremap <C-t> :TlistToggle<CR>

" Plugins Settings
" For NERDTree
let NERDTreeIgnore=['\.swp$[[file]]', '\~$[[file]]']
let NERDTreeMinimalUI=1
" Syntax Checker
let g:go_fmt_fail_silently = 1
let g:syntastic_aggregate_errors = 1
let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_jump = 0
let g:syntastic_auto_loc_list = 1
let g:syntastic_check_on_open = 0
let g:syntastic_check_on_wq = 0
let g:syntastic_enable_balloons = 1

"let Tlist_GainFocus_On_ToggleOpen=1
"let Tlist_Show_One_File=1
"let Tlist_WinWidth=40
"let Tlist_Exit_OnlyWindow=1
"let Tlist_Use_Right_Window=1
"let Tlist_GainFocus_On_ToggleOpen=1
